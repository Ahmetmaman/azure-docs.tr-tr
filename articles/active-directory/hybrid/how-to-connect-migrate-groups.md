---
title: 'Azure AD Bağlantısı: Grupları bir ormandan diğerine geçir | Microsoft Dokümanlar'
description: Bu makalede, Azure AD Connect için grupları bir ormandan diğerine başarıyla geçirmek için gereken adımlar açıklanmaktadır.
services: active-directory
author: billmath
manager: daveba
ms.service: active-directory
ms.topic: reference
ms.workload: identity
ms.date: 04/02/2020
ms.subservice: hybrid
ms.author: billmath
ms.collection: M365-identity-device-management
ms.openlocfilehash: 602c60de392afbff18bc141605a936636e48dbfe
ms.sourcegitcommit: ffc6e4f37233a82fcb14deca0c47f67a7d79ce5c
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/21/2020
ms.locfileid: "81729696"
---
# <a name="migrate-groups-from-one-forest-to-another-for-azure-ad-connect"></a>Azure AD Connect için grupları bir ormandan diğerine geçirin

Bu makalede, taşınan grup nesnelerinin buluttaki varolan nesnelerle eşleşmesi için grupları bir ormandan diğerine başarıyla geçirmek için gereken adımlar açıklanmaktadır.

## <a name="prerequisites"></a>Ön koşullar

- Azure AD Connect sürümü 1.5.18.0 veya üstü
- Kaynak Çapa özniteliği`mS-DS-ConsistencyGuid`

Azure AD Connect, sürüm 1.5.18.0'dan itibaren `mS-DS-ConsistencyGuid` gruplar için kullanımını desteklemeye başladı. `mS-DS-ConsistencyGuid` Kaynak bağlantı özelliği olarak seçilirve değer AD'de doldurulursa, Azure `mS-DS-ConsistencyGuid` AD Connect değişmezId olarak değerini kullanır. Aksi takdirde, geri `objectGUID`kullanarak düşüyor. Ancak, Azure AD Connect'in AD'deki `mS-DS-ConsistencyGuid` özniteliğe değer **yazmadığını** lütfen unutmayın.

Bir grup nesnesinin bir ormandan (F1 deyin) başka bir ormana (F2 deyin) taşındığı bir `mS-DS-ConsistencyGuid` çapraz orman taşıma `objectGUID` senaryosu sırasında, F1 ormanındaki `mS-DS-ConsistencyGuid` nesnenin değerini (Varsa) veya değeri F2'deki nesnenin özniteliğine kopyalamamız gerekir. 

F1 ormanından orman F2'ye tek bir grubu nasıl geçirebileceğinizi görmek için lütfen kılavuz olarak aşağıdaki komut dosyalarını kullanın. Lütfen birden fazla grup için geçiş yapmak için bir kılavuz olarak kullanmaktan çekinmeyin.

İlk olarak, `objectGUID` f1 ormanındaki grup nesnesini ve `mS-DS-ConsistencyGuid` grubunu alıyoruz. Bu öznitelikler bir CSV dosyasına dışa aktarılır.
```
<#
DESCRIPTION
============
This script will take DN of a group as input.
It then copies the objectGUID and mS-DS-ConsistencyGuid values along with other attributes of the given group to a CSV file.

This CSV file can then be used as input to Export-Group script
#>
Param(
       [ValidateNotNullOrEmpty()]
       [string]
       $dn,

       [ValidateNotNullOrEmpty()]
       [string]
       $outputCsv
)

$defaultProperties = @('samAccountName', 'distinguishedName', 'objectGUID', 'mS-DS-ConsistencyGuid')
$group  = Get-ADGroup -Filter "DistinguishedName -eq '$dn'" -Properties $defaultProperties -ErrorAction Stop
$results = @()
if ($group -eq $null)
{
       Write-Error "Group not found"
}
else
{
       $objectGUIDValue = [GUID]$group.'objectGUID'
       $mSDSConsistencyGuidValue = "N/A"
       if ($group.'mS-DS-ConsistencyGuid' -ne $null)
       {
              $mSDSConsistencyGuidValue = [GUID]$group.'mS-DS-ConsistencyGuid'
       }
       $adgroup = New-Object -TypeName PSObject
       $adgroup | Add-Member -MemberType NoteProperty -Name samAccountName -Value $($group.'samAccountName')
       $adgroup | Add-Member -MemberType NoteProperty -Name distinguishedName -Value $($group.'distinguishedName')
       $adgroup | Add-Member -MemberType NoteProperty -Name objectGUID -Value $($objectGUIDValue)
       $adgroup | Add-Member -MemberType NoteProperty -Name mS-DS-ConsistencyGuid -Value $($mSDSConsistencyGuidValue)
       $results += $adgroup
}

Write-Host "Exporting group to output file"
$results | Export-Csv "$outputCsv" -NoTypeInformation

```

Daha sonra, oluşturulan çıktı CSV dosyasını, F2 ormanındaki hedef nesneye damgalamak `mS-DS-ConsistencyGuid` için kullanırız.


```
<#
DESCRIPTION
============
This script will take DN of a group as input and the CSV file that was generated by Import-Group script
It copies either the objectGUID or mS-DS-ConsistencyGuid value from CSV file to the given object.

#>
Param(
       [ValidateNotNullOrEmpty()]
       [string]
       $dn,

       [ValidateNotNullOrEmpty()]
       [string]
       $inputCsv
)

$group  = Get-ADGroup -Filter "DistinguishedName -eq '$dn'" -ErrorAction Stop
if ($group -eq $null)
{
       Write-Error "Group not found"
}

$csvFile = Import-Csv -Path $inputCsv -ErrorAction Stop
$msDSConsistencyGuid = $csvFile.'mS-DS-ConsistencyGuid'
$objectGuid = [GUID] $csvFile.'objectGUID'
$targetGuid = $msDSConsistencyGuid

if ($msDSConsistencyGuid -eq "N/A")
{
       $targetGuid = $objectGuid
}

Set-ADGroup -Identity $dn -Replace @{'mS-DS-ConsistencyGuid'=$targetGuid} -ErrorAction Stop

```

## <a name="next-steps"></a>Sonraki adımlar
[Şirket içi kimliklerinizi Azure Active Directory ile tümleştirme](whatis-hybrid-identity.md) hakkında daha fazla bilgi edinin.
