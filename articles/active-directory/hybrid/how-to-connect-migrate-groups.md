---
title: 'Azure AD Connect: grupları bir ormandan diğerine geçirme'
description: Bu makalede, Azure AD Connect için grupları bir ormandan diğerine başarıyla geçirmek için gereken adımlar açıklanmaktadır.
services: active-directory
author: billmath
manager: daveba
ms.service: active-directory
ms.topic: reference
ms.workload: identity
ms.date: 04/02/2020
ms.subservice: hybrid
ms.author: billmath
ms.collection: M365-identity-device-management
ms.openlocfilehash: da2328674fd601f2e04684e8a9af1ae242ff6106
ms.sourcegitcommit: 58faa9fcbd62f3ac37ff0a65ab9357a01051a64f
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 04/28/2020
ms.locfileid: "82229808"
---
# <a name="migrate-groups-from-one-forest-to-another-for-azure-ad-connect"></a>Azure AD Connect için grupları bir ormandan diğerine geçirme

Bu makalede, geçirilmiş grup nesnelerinin buluttaki mevcut nesnelerle eşleşmesi için grupların bir ormandan diğerine geçirilmesi açıklanmaktadır.

## <a name="prerequisites"></a>Ön koşullar

- Azure AD Connect sürüm 1.5.18.0 veya üzeri
- Olarak ayarlanan kaynak bağlantı özniteliği`mS-DS-ConsistencyGuid`

## <a name="migrate-groups"></a>Grupları geçirme

Sürüm 1.5.18.0 ' den başlayarak, Azure AD Connect gruplar için `mS-DS-ConsistencyGuid` özniteliğin kullanımını destekler. Kaynak bağlantısı özniteliği `mS-DS-ConsistencyGuid` olarak ' yi seçerseniz ve değer Active Directory doldurulduktan sonra, Azure AD Connect değerini `mS-DS-ConsistencyGuid` kullanır. `immutableId` Aksi takdirde, kullanmaya `objectGUID`geri döner. Ancak Azure AD Connect değeri Active Directory `mS-DS-ConsistencyGuid` özniteliğe geri yazmadığını unutmayın.

Bir ormanlar arası taşıma sırasında, bir grup nesnesi bir ormandan (F1) başka bir ormana geçtiğinde (F2 deyin), `mS-DS-ConsistencyGuid` değeri (varsa) veya ormandaki nesnedeki `objectGUID` değeri F2 içindeki nesnesinin `mS-DS-ConsistencyGuid` özniteliğiyle (varsa) kopyalamanız gerekir.

Tek bir grubu bir ormandan diğerine geçirmeyi öğrenmek için aşağıdaki komut dosyalarını kılavuz olarak kullanın. Bu komut dosyalarını birden çok grubun geçişi için kılavuz olarak da kullanabilirsiniz. Betikler, kaynak orman için F1 orman adını ve hedef orman için F2 'yi kullanır.

İlk olarak, grup nesnesinin `objectGUID` ve `mS-DS-ConsistencyGuid` içindeki Grup nesnesini F1 'e ekledik. Bu öznitelikler bir CSV dosyasına aktarılmalıdır.
```
<#
DESCRIPTION
============
This script will take DN of a group as input.
It then copies the objectGUID and mS-DS-ConsistencyGuid values along with other attributes of the given group to a CSV file.

This CSV file can then be used as input to the Export-Group script.
#>
Param(
       [ValidateNotNullOrEmpty()]
       [string]
       $dn,

       [ValidateNotNullOrEmpty()]
       [string]
       $outputCsv
)

$defaultProperties = @('samAccountName', 'distinguishedName', 'objectGUID', 'mS-DS-ConsistencyGuid')
$group  = Get-ADGroup -Filter "DistinguishedName -eq '$dn'" -Properties $defaultProperties -ErrorAction Stop
$results = @()
if ($group -eq $null)
{
       Write-Error "Group not found"
}
else
{
       $objectGUIDValue = [GUID]$group.'objectGUID'
       $mSDSConsistencyGuidValue = "N/A"
       if ($group.'mS-DS-ConsistencyGuid' -ne $null)
       {
              $mSDSConsistencyGuidValue = [GUID]$group.'mS-DS-ConsistencyGuid'
       }
       $adgroup = New-Object -TypeName PSObject
       $adgroup | Add-Member -MemberType NoteProperty -Name samAccountName -Value $($group.'samAccountName')
       $adgroup | Add-Member -MemberType NoteProperty -Name distinguishedName -Value $($group.'distinguishedName')
       $adgroup | Add-Member -MemberType NoteProperty -Name objectGUID -Value $($objectGUIDValue)
       $adgroup | Add-Member -MemberType NoteProperty -Name mS-DS-ConsistencyGuid -Value $($mSDSConsistencyGuidValue)
       $results += $adgroup
}

Write-Host "Exporting group to output file"
$results | Export-Csv "$outputCsv" -NoTypeInformation

```

Daha sonra, oluşturulan çıkış CSV dosyasını, ormandaki hedef nesne üzerindeki `mS-DS-ConsistencyGuid` özniteliğini damgalamak için kullanırız:


```
<#
DESCRIPTION
============
This script will take DN of a group as input and the CSV file that was generated by the Import-Group script.
It copies either the objectGUID or the mS-DS-ConsistencyGuid value from the CSV file to the given object.

#>
Param(
       [ValidateNotNullOrEmpty()]
       [string]
       $dn,

       [ValidateNotNullOrEmpty()]
       [string]
       $inputCsv
)

$group  = Get-ADGroup -Filter "DistinguishedName -eq '$dn'" -ErrorAction Stop
if ($group -eq $null)
{
       Write-Error "Group not found"
}

$csvFile = Import-Csv -Path $inputCsv -ErrorAction Stop
$msDSConsistencyGuid = $csvFile.'mS-DS-ConsistencyGuid'
$objectGuid = [GUID] $csvFile.'objectGUID'
$targetGuid = $msDSConsistencyGuid

if ($msDSConsistencyGuid -eq "N/A")
{
       $targetGuid = $objectGuid
}

Set-ADGroup -Identity $dn -Replace @{'mS-DS-ConsistencyGuid'=$targetGuid} -ErrorAction Stop

```

## <a name="next-steps"></a>Sonraki adımlar
[Şirket içi kimliklerinizi Azure Active Directory tümleştirme](whatis-hybrid-identity.md)hakkında daha fazla bilgi edinin.
