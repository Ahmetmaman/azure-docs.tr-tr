---
title: Azure Servis Veri Servisi iletileri, yükler ve serileştirme | Microsoft Dokümanlar
description: Bu makalede, Azure Hizmet Veri Servisi iletilerine, taşıma yüklerine, ileti yönlendirmeye ve serileştirmeye genel bir bakış sunulmaktadır.
services: service-bus-messaging
documentationcenter: ''
author: axisc
manager: timlt
editor: spelluru
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/24/2020
ms.author: aschhab
ms.openlocfilehash: 11e56ae2483a254fb00e3593da7841f3f3d844f3
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 03/27/2020
ms.locfileid: "76759406"
---
# <a name="messages-payloads-and-serialization"></a>İletiler, yükler ve serileştirme

Microsoft Azure Hizmet Veri Servisi iletileri işler. İletiler, anahtar değer çifti özellikleri şeklinde, yükü açıklayan ve Servis Veri Servisi ve uygulamalarına işleme yönergeleri veren meta verilerin yanı sıra bir yük de taşır. Bazen, bu meta veriler tek başına gönderenin alıcılara iletmek istediği bilgileri taşımak için yeterlidir ve yük boş kalır.

.NET ve Java için resmi Servis Veri Servisi istemcilerinin nesne modeli, Servis Veri Servisi'nin desteklediği tel protokollerine eşlenen soyut Servis Veri Hizmeti ileti yapısını yansıtır.
 
Servis Veri Servisi iletisi, Servis Veri Servisi'nin hizmet tarafında hiçbir biçimde işlemediğini niçin iki tane ödeme yükü bölümünden ve iki özellik kümesinden oluşur. *Broker özellikleri* sistem tarafından önceden tanımlanır. Bu önceden tanımlanmış özellikler, aracının içindeki ileti düzeyi işlevselliğini denetler veya yaygın ve standartlaştırılmış meta veri öğeleriyle eşleşir. *Kullanıcı özellikleri,* uygulama tarafından tanımlanabilen ve ayarlanabilen anahtar değer çiftleri topluluğu.
 
Önceden tanımlanmış broker özellikleri aşağıdaki tabloda listelenmiştir. Adlar tüm resmi istemci API'leri ile ve ayrıca HTTP protokol eşleme [BrokerProperties](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) JSON nesnesi kullanılır.
 
AMQP protokol düzeyinde kullanılan eşdeğer adlar parantez içinde listelenir. 

| Özellik Adı                         | Açıklama                                                                                                                                                                                                                                                                                                                                                                                                                               |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  [İçerikTürü](/dotnet/api/microsoft.azure.servicebus.message.contenttype) (içerik türü)           | RFC2045, Bölüm 5 biçimini izleyen bir tanımlayıcı ile iletinin yükünü isteğe bağlı olarak açıklar; örneğin, `application/json`.                                                                                                                                                                                                                                                                                             |
|  [Korelasyonid](/dotnet/api/microsoft.azure.servicebus.message.correlationid#Microsoft_Azure_ServiceBus_Message_CorrelationId) (korelasyon-id)       | Bir uygulamanın, ilişkiamaçlı ileti için bir bağlam belirtmesini sağlar; örneğin, yanıtlanan bir iletinin **MessageId'ini** yansıtır.                                                                                                                                                                                                                                                                  |
| [DeadLetterSource](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deadlettersource)                      | Yalnızca ölü harflerle yazılmış ve daha sonra ölü harf kuyruğundan başka bir varlığa otomatik olarak iletilmiş iletiler olarak ayarlayın. İletinin ölü harflerle yazıldığı varlığı gösterir. Bu özellik salt okunur durumdadır.                                                                                                                                                                                                                                  |
| [Teslimat Sayısı](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deliverycount)                         | Bu ileti için denenen teslimat ların sayısı. İleti kilidi sona erdiğinde veya ileti alıcı tarafından açıkça terk edildiğinde sayım artımlanır. Bu özellik salt okunur durumdadır.                                                                                                                                                                                                                                                  |
| [EnqueuedSequenceNumber](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.enqueuedsequencenumber)                | Otomatik olarak iletilmiş iletiler için bu özellik, iletiye ilk olarak özgün gönderme noktasında atanan sıra numarasını yansıtır. Bu özellik salt okunur durumdadır.                                                                                                                                                                                                                                                                |
| [EnqueuedTimeUtc](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.enqueuedtimeutc)                       | İletinin kabul edildiği ve varlıkta depolandığı UTC anında. Alıcı gönderenin saatine güvenmek istemediğinde, bu değer yetkili ve nötr varış saati göstergesi olarak kullanılabilir. Bu özellik salt okunur durumdadır.                                                                                                                                                                                                   |
|  [Sona ererAtUtc](/dotnet/api/microsoft.azure.servicebus.message.expiresatutc) (mutlak vade sonu-süresi) | İletinin kaldırılması için işaretlendiği ve son kullanma tarihi nedeniyle varlıktan alınabilecek artık olmadığı UTC anında. Son kullanma tarihi **TimeToLive** özelliği tarafından kontrol edilir ve bu özellik EnqueuedTimeUtc+TimeToLive adresinden hesaplanır. Bu özellik salt okunur durumdadır.                                                                                                                                                                           |
| [Zorlama Kalıcılığı](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.forcepersistence)                      | [EnableExpress](/dotnet/api/microsoft.servicebus.messaging.queuedescription.enableexpress) bayrak kümesine sahip kuyruklar veya konular için bu özellik, iletinin onaylanmadan önce diske kalıcı olarak salınması gerektiğini belirtmek üzere ayarlanabilir. Bu, ifade edilmeyen tüm varlıklar için standart davranıştır.                                                                                                                                                                                                         |
| [Etiket](/dotnet/api/microsoft.azure.servicebus.message.label) (konu)                       | Bu özellik, uygulamanın iletinin amacını alıcıya standart bir şekilde, bir e-posta konu satırına benzer şekilde göstermesini sağlar.                                                                                                                                                                                                                                                                                  |
| [KilitliUntilUtc](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.lockeduntilutc)                        | Kilit altında alınan iletiler için (önceden kapatılmış olmayan peek-lock alma modu) bu özellik, iletinin kuyrukta/abonelikte kilitli tutulduğu UTC anını yansıtır. Kilidin süresi [dolduğunda, Teslim Sayısı](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.deliverycount) artımlanır ve ileti geri almak için yeniden kullanılabilir. Bu özellik salt okunur durumdadır.                                                                                                                         |
| [LockToken](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.locktoken)                             | Kilit belirteci, komisyoncu tarafından *peek-lock* alma modunda tutulan kilitiçin bir başvurudur. Belirteç, kilidi [Erteleme](message-deferral.md) API'si aracılığıyla kalıcı olarak sabitlemek ve bununla birlikte, iletiyi normal teslim durumu akışından çıkarmak için kullanılabilir. Bu özellik salt okunur durumdadır.                                                                                                                                                               |
| [MessageId](/dotnet/api/microsoft.azure.servicebus.message.messageid) (ileti kimliği)                | İleti tanımlayıcısı, iletiyi ve yükünü benzersiz olarak tanımlayan uygulama tanımlı bir değerdir. Tanımlayıcı serbest biçimli bir dizedir ve uygulama bağlamından türetilen bir GUID veya tanımlayıcıyı yansıtabilir. Etkinleştirilirse, [yinelenen algılama](duplicate-detection.md) özelliği aynı **MessageId**ile iletilerin ikinci ve sonraki gönderimlerini tanımlar ve kaldırır.                                                                |
| [PartitionKey](/dotnet/api/microsoft.azure.servicebus.message.partitionkey)                          | [Bölümlenmiş varlıklar](service-bus-partitioning.md)için, bu değeri ayarı, ilgili iletilerin aynı iç bölüme atanmasını sağlar, böylece gönderme sırası sırası doğru kaydedilir. Bölüm, bu değer üzerinde karma bir işlev tarafından seçilir ve doğrudan seçilemez. Oturum dan haberdar varlıklar için **SessionId** özelliği bu değeri geçersiz kılar.                                                                                                       |
| [Yanıtla](/dotnet/api/microsoft.azure.servicebus.message.replyto) (yanıtla-yanıt)                    | Bu isteğe bağlı ve uygulama tanımlı değer, iletinin alıcısına yanıt yolunu ifade etmenin standart bir yoludur. Gönderen bir yanıt beklediğinde, yanıtı niçin gönderilmesini beklediği sıranın veya konunun mutlak veya göreli yoluna değeri ayarlar.                                                                                                                                           |
| [ReplyToSessionId](/dotnet/api/microsoft.azure.servicebus.message.replytosessionid) (yanıt-grup-id)  | Bu değer **Yanıtla** bilgilerini genişletir ve yanıt varlığına gönderildiğinde yanıt için hangi **SessionId'nin** ayarlanması gerektiğini belirtir.                                                                                                                                                                                                                                                                            |
| [ScheduledEnqueueTimeUtc](/dotnet/api/microsoft.azure.servicebus.message.scheduledenqueuetimeutc)               | Yalnızca bir gecikmeden sonra geri alınmak üzere kullanıma sunulan iletiler için bu özellik, iletinin mantıksal olarak sıralandığı, sıralandığı ve bu nedenle alma için kullanıma sunulabilen UTC anını tanımlar.                                                                                                                                                                                                                 |
| [Sequencenumber](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.sequencenumber)                        | Sıra numarası, broker tarafından kabul edilip depolanır ve gerçek tanımlayıcısı olarak işlev görür. Bölümlenmiş varlıklar için en üstteki 16 bit bölüm tanımlayıcısını yansıtır. Sıra numaraları monoton olarak artar ve boşluksuz. 48-64 bit aralığı tükendiğinde 0'a kadar yuvarlanırlar. Bu özellik salt okunur durumdadır.                                                                |
| [SessionId](/dotnet/api/microsoft.azure.servicebus.message.sessionid) (grup kimliği)                  | Oturumdan haberdar olan varlıklar için bu uygulama tanımlı değer iletinin oturum bağlantısını belirtir. Aynı oturum tanımlayıcısına sahip iletiler özet kilitlemeye tabidir ve tam sırayla işleme ve demultiplexing'i etkinleştirin. Oturum farkında olmayan varlıklar için bu değer yoksayılır.                                                                                                                                     |
| [Boyut](/dotnet/api/microsoft.azure.servicebus.message.size)                                  | Depolama kotasına doğru saydığı için, iletinin depolanan boyutunu aracı günlüğündeki bayt sayısı olarak yansıtır. Bu özellik salt okunur durumdadır.                                                                                                                                                                                                                                                                                                       |
| [Durum](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.state)                                 | Günlükteki iletinin durumunu gösterir. Bu özellik, iletinin "etkin" olup olmadığını ve sıranın en üstüne ulaştığında, ertelenip ertelenmediğini veya zamanlanmayı bekleyip beklemediğini belirlemek için yalnızca ileti tarama ("peek") sırasında alakalıdır. Bu özellik salt okunur durumdadır.                                                                                                                                           |
| [TimeToLive](/dotnet/api/microsoft.azure.servicebus.message.timetolive)                            | Bu değer, iletinin **enqueueTimeUtc'ta**yakalandığı andan itibaren iletinin süresinin dolduğu göreli süredir. Açıkça ayarlanmadığında, varsayılan değer ilgili sıra veya konu için **DefaultTimeToLive'dır.** İleti düzeyi **TimeToLive** değeri varlığın **VarsayılanZamanToLive** ayarlarından daha uzun olamaz. Daha uzunsa, sessizce ayarlanır. |
| [Için](/dotnet/api/microsoft.azure.servicebus.message.to) (için)                               | Bu özellik yönlendirme senaryolarında gelecekteki kullanım için ayrılmıştır ve şu anda broker kendisi tarafından göz ardı. Uygulamalar, iletinin amaçlanan mantıksal hedefini belirtmek için kural güdümlü otomatik yönlendirme zincirleme senaryolarında bu değeri kullanabilir.                                                                                                                                                                                   |
| [ViaPartitionKey](/dotnet/api/microsoft.azure.servicebus.message.viapartitionkey)                       | Bir ileti bir hareket kapsamında bir aktarım kuyruğu üzerinden gönderilirse, bu değer aktarım sırasını seçer.                                                                                                                                                                                                                                                                                                                 |

Soyut ileti modeli, bir iletinin HTTP (aslında her zaman HTTPS) aracılığıyla kuyruğa nakledilmesini sağlar ve AMQP ile alınabilir. Her iki durumda da, ileti ilgili protokol bağlamında normal görünür. Aracı özellikleri gerektiği gibi çevrilir ve kullanıcı özellikleri ilgili protokol ileti modelinde en uygun konuma eşlenir. HTTP'de, kullanıcı özellikleri doğrudan HTTP üstbilgilerine ve bu başlıklardan harita oluşturur; AMQP'de **uygulama özellikleri** haritasına ve bu haritadan eşlerler.

## <a name="message-routing-and-correlation"></a>İleti yönlendirme ve korelasyon

Daha önce açıklanan broker özelliklerinin bir alt kümesi, özellikle [Yanıt](/dotnet/api/microsoft.azure.servicebus.message.to), [ReplyToSessionId](/dotnet/api/microsoft.azure.servicebus.message.replytosessionid), MessageId , [ReplyTo](/dotnet/api/microsoft.azure.servicebus.message.replyto) [CorrelationId](/dotnet/api/microsoft.azure.servicebus.message.messageid), ve [SessionId](/dotnet/api/microsoft.azure.servicebus.message.sessionid), uygulamaların belirli hedeflere ileti yönlendirmesine yardımcı olmak için kullanılır. [CorrelationId](/dotnet/api/microsoft.azure.servicebus.message.correlationid) Bunu göstermek için birkaç desen düşünün:

- **Basit istek/yanıt**: Yayımcı kuyruğa ileti gönderir ve ileti tüketicisinden yanıt bekler. Yanıtı almak için yayımcı, yanıtların teslim edilmesini beklediği bir sıraya sahip olur. Bu sıranın adresi giden iletinin **Yanıtla** özelliğinde ifade edilir. Tüketici yanıt verdiğinde, işlenen iletinin **MessageId'ini** yanıt iletisinin **Korelasyon Özelliği'ne** kopyalar ve iletiyi **Yanıtlama** özelliğinde belirtilen hedefe teslim eder. Bir ileti, uygulama bağlamına bağlı olarak birden çok yanıt verebilir.
- **Çok noktaya yayın isteği/yanıtı**: Önceki desenin bir varyasyonu olarak, yayımcı iletiyi bir konuya gönderir ve birden çok abone iletiyi tüketmeye uygun hale gelir. Abonelerin her biri daha önce açıklanan şekilde yanıt verebilir. Bu desen, bulma veya yoklama senaryolarında kullanılır ve yanıtlayan genellikle kendisini bir kullanıcı özelliğiyle veya yükün içinde tanımlar. **YanıtBir** konuya işaret ederse, bu tür bir bulma yanıtı kümesi hedef kitleye dağıtılabilir.
- **Çoklama**: Bu oturum özelliği, **sessionid** değerleri eşleştirilerek tanımlanan ilgili iletilerin her oturumunun (veya grubunun) belirli bir alıcıya yönlendirilirken, alıcı oturumu kilit altında tutarken belirli bir alıcıya yönlendirilmesi için tek bir kuyruk veya abonelik yoluyla ilgili ileti akışlarının çoklaşılmasını sağlar. [Burada](message-sessions.md)oturumların ayrıntıları hakkında daha fazla bilgi edinin.
- **Çok katlı istek/yanıt**: Bu oturum özelliği, birden fazla yanıt almasına olanak sağlayarak birkaç yayımcının yanıt sırasını paylaşmasına olanak tanır. **YanıttoSessionId'i**ayarlayarak yayımcı, tüketiciye bu değeri yanıt iletisinin **SessionId** özelliğine kopyalamasını söyleyebilir. Yayımlama sırasının veya konunun oturum farkında olması gerekmez. İleti gönderildikçe, yayımcı özellikle bir oturum alıcısını koşullu olarak kabul ederek sırada oturum unu gerçekleştirecek verilen **SessionId** ile bir oturumu bekleyebilir. 

Servis Veri Kurumu ad alanı içinde yönlendirme otomatik ileri zincirleme ve konu abonelik kuralları kullanılarak gerçekleştirilebilir. Ad alanları arasında yönlendirme [Azure LogicApps kullanılarak](https://azure.microsoft.com/services/logic-apps/)gerçekleştirilebilir. Önceki listede belirtildiği gibi, **To** özelliği gelecekteki kullanım için ayrılmıştır ve sonunda komisyoncu tarafından özel olarak etkin leştirilmiş bir özellik ile yorumlanabilir. Yönlendirmeyi uygulamak isteyen uygulamalar bunu kullanıcı özelliklerine göre yapmalı ve **To** özelliğine dayanmamalıdır; ancak, bunu şimdi yapmak uyumluluk sorunlarına neden olmaz.

## <a name="payload-serialization"></a>Yük serileştirme

Transit veya Servis Veri Yolu içinde depolandığında, yük her zaman opak, ikili blok. [ContentType](/dotnet/api/microsoft.azure.servicebus.message.contenttype) özelliği, iETF RFC2045'e göre özellik değerleri için önerilen biçim in MIME içerik türü açıklaması yla uygulamaların yükü tanımlamasını sağlar; örneğin, `application/json;charset=utf-8`.

Java veya .NET Standart türevlerinin aksine, Service Bus API'nin .NET Framework sürümü, rasgele .NET nesnelerini oluşturucuya geçirerek **BrokeredMessage** örneklerioluşturmayı destekler. 

Eski SBMP protokolü kullanırken, bu nesneler varsayılan ikili serileştirici veya harici olarak sağlanan bir serializer ile seri hale getirilir. AMQP iletişim kuralını kullanırken, nesne bir AMQP nesnesine seri olarak verilir. Alıcı, beklenen türü sağlayarak bu nesneleri [GetBody\<T>()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.getbody#Microsoft_ServiceBus_Messaging_BrokeredMessage_GetBody__1) yöntemiyle alabilir. AMQP ile nesneler **ArrayList** ve **IDictionary<string,object>** nesnelerin amqp grafiğine seri hale getirilir ve herhangi bir AMQP istemcisi bunları çözebilir. 

Bu gizli serileştirme büyüsü kullanışlı olsa da, uygulamalar nesne serileştirmenin açık denetimini almalı ve bunları bir iletiye dahil etmeden önce nesne grafiklerini akışlara dönüştürmeli ve alıcı tarafında tersi yapmalıdır. Bu birlikte çalışabilir sonuçlar verir. Ayrıca, AMQP güçlü bir ikili kodlama modeli ne kadar güçlü bir ikili kodlama modeli ne kadar olsa da, AMQP mesajlaşma ekosistemine bağlı olduğu ve HTTP istemcilerinin bu tür yükleri çözmekte sorun olacakları da unutulmamalıdır. 

JSON ve Apache Avro'yu genellikle yapılandırılmış veriler için yük biçimleri olarak öneririz.

.NET Standart ve Java API türevleri yalnızca bayt dizilerini kabul eder, bu da uygulamanın nesne serileştirme denetimini işlemesi gerektiği anlamına gelir. 

## <a name="next-steps"></a>Sonraki adımlar

Service Bus mesajlaşması hakkında daha fazla bilgi edinmek için aşağıdaki konulara bakın:

* [Service Bus kuyrukları, konu başlıkları ve abonelikleri](service-bus-queues-topics-subscriptions.md)
* [Service Bus kuyrukları ile çalışmaya başlama](service-bus-dotnet-get-started-with-queues.md)
* [Service Bus konu başlıklarını ve aboneliklerini kullanma](service-bus-dotnet-how-to-use-topics-subscriptions.md)
