---
title: SQL Güvenlik Açığı Değerlendirmesi
titleSuffix: Azure SQL Database & SQL Managed Instance & Azure Synapse Analytics
description: SQL güvenlik açığı değerlendirmesini yapılandırma ve Azure SQL veritabanı, Azure SQL yönetilen örneği ve Azure SYNAPSE Analytics 'teki değerlendirme raporlarını yorumlama hakkında bilgi edinin.
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.custom: sqldbrb=3
ms.devlang: ''
ms.topic: how-to
author: davidtrigano
ms.author: datrigan
ms.reviewer: vanto
ms.date: 09/21/2020
tags: azure-synapse
ms.openlocfilehash: 67258a19d1efe605a3a0b2227f107cc1928a207a
ms.sourcegitcommit: 8245325f9170371e08bbc66da7a6c292bbbd94cc
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/07/2021
ms.locfileid: "99806401"
---
# <a name="sql-vulnerability-assessment-helps-you-identify-database-vulnerabilities"></a>SQL güvenlik açığı değerlendirmesi, veritabanı güvenlik açıklarını tanımlamanızı sağlar
[!INCLUDE[appliesto-sqldb-sqlmi-asa](../includes/appliesto-sqldb-sqlmi-asa.md)]

SQL güvenlik açığı değerlendirmesi, olası veritabanı güvenlik açıklarını düzeltebileceğiniz, izleyebileceğiniz ve bu sorunları gidermenize yardımcı olabilecek, kolay yapılandırmalı bir hizmettir. Veritabanı güvenliğinizi proaktif olarak geliştirmek için bu hizmeti kullanın.

Güvenlik açığı değerlendirmesi, SQL teklifi [Için Azure Defender](azure-defender-for-sql.md) 'ın, gelişmiş SQL güvenlik özelliklerine yönelik Birleşik bir paket olan parçasıdır. Güvenlik açığı değerlendirmesi, SQL Portal için merkezi Azure Defender aracılığıyla erişilebilir ve yönetilebilir.

> [!NOTE]
> Azure SQL veritabanı, Azure SQL yönetilen örneği ve Azure SYNAPSE Analytics için güvenlik açığı değerlendirmesi desteklenir. Azure SQL veritabanı, Azure SQL yönetilen örneği ve Azure SYNAPSE Analytics 'teki veritabanları, bu makalenin geri kalanında veritabanı olarak ve sunucu, Azure SQL veritabanı ve Azure SYNAPSE için veritabanları barındıran [sunucuya](logical-servers.md) başvurmaktadır.

## <a name="what-is-sql-vulnerability-assessment"></a>SQL güvenlik açığı değerlendirmesi nedir?

SQL güvenlik açığı değerlendirmesi, güvenlik durumlarınızın görünürlüğünü sağlayan bir hizmettir. Güvenlik açığı değerlendirmesi, güvenlik sorunlarını çözmek ve veritabanı güvenlerinizi geliştirmek için uygulanabilir adımları içerir. Değişikliklerin SQL güvenlik duruşunuzu izlemek ve geliştirmek zor olan dinamik bir veritabanı ortamını izlemenize yardımcı olabilir.

Güvenlik açığı değerlendirmesi, Azure SQL veritabanı 'nda yerleşik olarak bulunan bir tarama hizmetidir. Hizmet, güvenlik açıklarına işaret eden kuralların bilgi bankasını kullanır. Yanlış yapılandırma, aşırı izin ve korunmayan hassas veriler gibi en iyi uygulamalardan sapmaları vurgular.

Kurallar Microsoft 'un en iyi uygulamalarını temel alır ve veritabanınıza ve değerli verilere en büyük riskleri sunan güvenlik sorunlarına odaklanmaktadır. Sunucu düzeyi sorunları ve sunucu düzeyi güvenlik sorunlarını (sunucu güvenlik duvarı ayarları ve sunucu düzeyi izinleri gibi) kapsar.

Taramanın sonuçları, her bir sorunu çözmek ve uygulanabilir olduğunda özelleştirilmiş düzeltme betikleri sağlamak için eylem yapılabilir adımları içerir. İçin kabul edilebilir bir taban çizgisi ayarlayarak, ortamınız için bir değerlendirme raporu özelleştirebilirsiniz:

- İzin konfigürasyonları
- Özellik yapılandırması
- Veritabanı ayarları

## <a name="configure-vulnerability-assessment"></a>Güvenlik açığı değerlendirmesini yapılandırma

Aşağıdaki adımlarda güvenlik açığı değerlendirmesi yapılandırılır:

1. [Azure Portal](https://portal.azure.com)Azure SQL VERITABANıNıZA, SQL yönetilen örnek veritabanınıza veya Azure SYNAPSE kaynağına gidin.

2. **Güvenlik** başlığı altında **Güvenlik Merkezi**' ni seçin.

3. Ardından bağlantı üzerinde **Yapılandır** ' a tıklayarak tüm sunucu veya yönetilen örnek için SQL Için Azure Defender ayarları bölmesini açın.

    > [!NOTE]
    > SQL güvenlik açığı değerlendirmesi, **SQL Için Azure Defender** planının taramalar çalıştırabilmesini gerektirir. SQL için Azure Defender 'ı etkinleştirme hakkında daha fazla bilgi için bkz. [SQL Için Azure Defender](azure-defender-for-sql.md).

4. Sunucudaki tüm veritabanları için tarama sonuçlarınızın veya yönetilen örneğin depolanacağı bir depolama hesabı yapılandırın. Depolama hesapları hakkında daha fazla bilgi için bkz. [Azure depolama hesapları hakkında](../../storage/common/storage-account-create.md).

    > [!NOTE]
    > Güvenlik duvarları ve sanal ağlar arkasında güvenlik açığı değerlendirmesi taramaları depolama hakkında daha fazla bilgi için bkz. [Store güvenlik açığı değerlendirmesi tarama sonuçları güvenlik duvarları ve sanal ağlar 'ın arkasında erişilebilen bir depolama hesabında](sql-database-vulnerability-assessment-storage.md).

5. Değişiklik güvenliği yanlış yapılandırmasını otomatik olarak algılamak üzere haftada bir kez düzenli yinelenen taramalar çalıştırmak için SQL güvenlik açığı değerlendirmesini yapılandırın. Bunu yapmak için, depolama hesabı seçimi altında **düzenli aralıklarla yinelenen taramalar** etkinleştirin. Tarama sonuçlarını **Gönder** bölümünde sağladığınız e-posta adreslerine tarama sonucu özeti gönderilir. Ayrıca yöneticilere ve **abonelik sahiplerine e-posta bildirimi göndermenizi** etkinleştirerek Yöneticiler ve abonelik sahiplerine e-posta bildirimi de gönderebilirsiniz.

6. SQL güvenlik açığı değerlendirmesi, isteğe bağlı olarak tarama çalıştırabilir. SQL güvenlik açığı değerlendirmesini yapılandırdıktan sonra, veritabanınızı güvenlik açıkları için taramak üzere **Tara** ' yı seçin.

![Bir veritabanını tarayın](./media/sql-vulnerability-assessment/pp_va_initialize.png)

  > [!NOTE]
  > Tarama hafif ve güvenlidir. Çalışması birkaç saniye sürer ve tamamen salt okunurdur. Veritabanınızda herhangi bir değişiklik yapmaz.

## <a name="remediate-vulnerabilities"></a>Güvenlik açıklarını düzeltin

1. Tarama tamamlandığında, tarama raporunuz Azure portal otomatik olarak görüntülenir. Rapor, güvenlik durumlarınızın genel bir görünümünü sunar. Kaç tane sorun olduğunu ve ilgili önem derecelerine göre listeler. Sonuçlar, en iyi uygulamalardan sapmalarla ilgili uyarıları ve veritabanı sorumluları ve rolleri gibi güvenlikle ilgili ayarlarınızın bir anlık görüntüsünü ve bunlarla ilişkili izinleri içerir.

![Raporu görüntüleyin](./media/sql-vulnerability-assessment/pp_main_getstarted.png)

2. Sonuçlarınızı gözden geçirin ve ortamınızdaki gerçek güvenlik sorunları olan rapordaki bulguları saptayın. Bulguları ve her bir güvenlik denetiminin neden başarısız olduğunu anlamak için, başarısız olan her sonucun detayına gidin. Sorunları çözmek için rapor tarafından sunulan eylem yapılabilir düzeltme bilgilerini kullanın.

![Raporu analiz etme](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

3. Değerlendirme sonuçlarınızı gözden geçirdikten sonra, belirli sonuçları ortamınızda kabul edilebilir bir *taban çizgisi* olarak işaretleyebilirsiniz. Taban çizgisi temelde sonuçların nasıl raporlanıldığını özelleştirirsiniz. Taban çizgisiyle eşleşen sonuçlar Sonraki taramalarda geçirilme olarak değerlendirilir. Temel güvenlik durumlarınızı kurduktan sonra, güvenlik açığı değerlendirmesi yalnızca temelden sapmalarla ilgili raporlar. Bu şekilde, ilgili sorunlara dikkat etmeniz için ilgilenmeniz gerekir.

![Taban çizgisini ayarlama](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)

4. **Kural temellerinizi** ayarlamayı tamamladıktan sonra, özelleştirilmiş raporu görüntülemek için yeni bir tarama çalıştırın. Güvenlik açığı değerlendirmesi artık yalnızca onaylanan taban durumınızdan saptan güvenlik sorunlarını bildiriyor.

![Özelleştirilmiş Raporunuzu görüntüleme](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)

Güvenlik açığı değerlendirmesi artık veritabanınızın her zaman yüksek düzeyde güvenlik tuttuğunu ve kuruluş ilkelerinizin karşılandığını izlemek için kullanılabilir. 

## <a name="advanced-capabilities"></a>Gelişmiş yetenekler

### <a name="export-an-assessment-report"></a>Değerlendirme raporunu dışarı aktarın

Tarama sonuçlarınızın indirilebilir bir Excel raporunu oluşturmak için **tarama sonuçlarını dışarı aktar** ' ı seçin. Bu rapor, değerlendirmenin özetini görüntüleyen bir Özet sekmesi içerir. Rapor, başarısız olan tüm denetimleri içerir. Ayrıca, taramanın tüm sonuç kümesini içeren bir **sonuçlar** sekmesi de bulunur. Sonuçlar, çalıştırılan tüm denetimleri ve her biri için sonuç ayrıntılarını içerir.

### <a name="view-scan-history"></a>Tarama geçmişini görüntüleyin

Daha önce bu veritabanında çalıştırılan tüm taramaların geçmişini görüntülemek için güvenlik açığı değerlendirmesi bölmesinde **tarama geçmişi** ' ni seçin. Bu taramanın ayrıntılı sonuçlarını görüntülemek için listeden belirli bir tarama seçin.

## <a name="manage-vulnerability-assessments-programmatically"></a>Güvenlik açığı değerlendirmelerini programlamayla yönetme

### <a name="using-azure-powershell"></a>Azure PowerShell’i kullanma

[!INCLUDE [updated-for-az](../../../includes/updated-for-az.md)]
> [!IMPORTANT]
> PowerShell Azure Resource Manager modülü hala desteklenmektedir, ancak gelecekteki tüm geliştirmeler az. SQL modülüne yöneliktir. Bu cmdlet 'ler için bkz. [Azurerd. SQL](/powershell/module/AzureRM.Sql/). Az Module ve Azurerd modüllerinde komutların bağımsız değişkenleri önemli ölçüde aynıdır.

Güvenlik açığı değerlendirmelerinizi programlı bir şekilde yönetmek için Azure PowerShell cmdlet 'lerini kullanabilirsiniz. Desteklenen Cmdlet 'ler şunlardır:

| Bağlantı olarak cmdlet adı | Description |
| :-------------------- | :---------- |
| [Clear-Azsqldatabasebir, Veitsessmentrulebaseline](/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Güvenlik açığı değerlendirme kuralı temelini temizler.<br/>İlk olarak, bu cmdlet 'i temizlemek için kullanmadan önce temeli ayarlayın. |
| [Clear-Azsqldatabasebir Azıyassessmentsetting](/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting) | Bir veritabanının güvenlik açığı değerlendirmesi ayarlarını temizler. |
| [Clear-Azsqlınstancedatabasebir](/powershell/module/az.sql/Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | Yönetilen bir veritabanının güvenlik açığı değerlendirme kuralı temelini temizler.<br/>İlk olarak, bu cmdlet 'i temizlemek için kullanmadan önce temeli ayarlayın. |
| [Clear-Azsqlınstancedatabase, Azıyassessmentsetting](/powershell/module/az.sql/Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | Yönetilen bir veritabanının güvenlik açığı değerlendirmesi ayarlarını temizler. |
| [Clear-Azsqlınstancebir Azıyassessmentsetting](/powershell/module/az.sql/Clear-AzSqlInstanceVulnerabilityAssessmentSetting) | Yönetilen bir örneğin güvenlik açığı değerlendirmesi ayarlarını temizler. |
| [Convert-Azsqldatabasebir Azıyassessmentscan](/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan) | Bir veritabanının bir Excel dosyasına yönelik güvenlik açığı değerlendirmesi tarama sonuçlarını dönüştürür. |
| [Convert-Azsqlınstancedatabasebir Azıyassessmentscan](/powershell/module/az.sql/Convert-AzSqlInstanceDatabaseVulnerabilityAssessmentScan) | Yönetilen bir veritabanının bir Excel dosyasına yönelik güvenlik açığı değerlendirmesi tarama sonuçlarını dönüştürür. |
| [Get-Azsqldatabasebir](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Belirli bir kural için bir veritabanının güvenlik açığı değerlendirme kuralı temelini alır. |
| [Get-Azsqlınstancedatabasebir](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | Belirli bir kural için yönetilen bir veritabanının güvenlik açığı değerlendirme kuralı temelini alır. |
| [Get-Azsqldatabasebir Azı_vsessmentscanrecord](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord) | Belirli bir veritabanıyla ilişkili tüm güvenlik açığı değerlendirmesi taraması kayıtlarını alır. |
| [Get-Azsqlınstancedatabasebir yardımcı](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentScanRecord) | Belirli bir yönetilen veritabanıyla ilişkili tüm güvenlik açığı değerlendirmesi taraması kayıtlarını alır. |
| [Get-Azsqldatabasebir Azıyassessmentsetting](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting) | Bir veritabanının güvenlik açığı değerlendirmesi ayarlarını döndürür. |
| [Get-Azsqlınstancedatabase, Azıyassessmentsetting](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | Yönetilen bir veritabanının güvenlik açığı değerlendirmesi ayarlarını döndürür. |
| [Set-Azsqldatabasebir Azıyassessmentrutabaseline](/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Güvenlik açığı değerlendirme kuralı temelini ayarlar. |
| [Set-Azsqlınstancedatabasebir bilgisayar \ Eyas/Baseline](/powershell/module/az.sql/Set-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | Yönetilen bir veritabanı için güvenlik açığı değerlendirme kuralı temelini ayarlar. |
| [Start-Azsqldatabase, Azıyassessmentscan](/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan) | Bir veritabanında güvenlik açığı değerlendirmesi taramasının başlangıcını tetikler. |
| [Start-azsqlınstancedatabase](/powershell/module/az.sql/Start-AzSqlInstanceDatabaseVulnerabilityAssessmentScan) | Yönetilen bir veritabanında güvenlik açığı değerlendirmesi taramasının başlangıcını tetikler. |
| [Update-Azsqldatabasebir, Veitsessmentsetting](/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting) | Bir veritabanının güvenlik açığı değerlendirmesi ayarlarını güncelleştirir. |
| [Update-Azsqlınstancedatabasebir, Veitsessmentsetting](/powershell/module/az.sql/Update-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | Yönetilen bir veritabanının güvenlik açığı değerlendirmesi ayarlarını güncelleştirir. |
| [Update-Azsqlınstancebir Azıyassessmentsetting](/powershell/module/az.sql/Update-AzSqlInstanceVulnerabilityAssessmentSetting) | Yönetilen bir örneğin güvenlik açığı değerlendirmesi ayarlarını güncelleştirir. |
| &nbsp; | &nbsp; |

Bir betik örneği için bkz. [Azure SQL güvenlik açığı değerlendirmesi PowerShell desteği](/archive/blogs/sqlsecurity/azure-sql-vulnerability-assessment-now-with-powershell-support).

### <a name="using-resource-manager-templates"></a>Resource Manager şablonlarını kullanma

Güvenlik açığı değerlendirmesi temellerini Azure Resource Manager şablonları kullanarak yapılandırmak için, türü kullanın `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` .

Taban çizgileri eklemeden önce etkin olduğunuzdan emin olun `vulnerabilityAssessments` .

İşte `master` `user` bir kaynak yöneticisi şablonundaki kaynak olarak VERITABANı ve VA1143 'e VA2065 temel kuralı tanımlamak için bir örnek:

```json
   "resources": [
      {
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "FirewallRuleName3",
                     "StartIpAddress",
                     "EndIpAddress"
                  ]
               },
               {
                  "result": [
                     "FirewallRuleName4",
                     "62.92.15.68",
                     "62.92.15.68"
                  ]
               }
            ]
         },
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
         "dependsOn": [
            "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
         ],
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "dbo"
                  ]
               }
            ]
         }
      }
   ]
```

`master`Veritabanı ve `user` veritabanı için, kaynak adları farklı şekilde tanımlanır:

- Ana veritabanı-"ad": "[Concat (Parametreler (' server_name '), '/', parametreler (' database_name '), '/default/VA2065/<b>Master</b>')]",
- Kullanıcı veritabanı-"ad": "[Concat (Parametreler (' server_name '), '/', parametreler (' database_name '), '/default/VA2065/<b>varsayılan</b>')]",

Boolean türlerini doğru/yanlış olarak işlemek için, taban çizgisi sonucunu "1"/"0" gibi ikili girişle ayarlayın.

```json
   {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
      "apiVersion": "2018-06-01-preview",
      "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",

      "dependsOn": [
         "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
      ],

      "properties": {
         "baselineResults": [
            {
               "result": [
                  "1"
               ]
            }
         ]
      }

   }
```

## <a name="next-steps"></a>Sonraki adımlar  

- [SQL Için Azure Defender](azure-defender-for-sql.md)hakkında daha fazla bilgi edinin.
- [Veri bulma ve sınıflandırma](data-discovery-and-classification-overview.md)hakkında daha fazla bilgi edinin.
- [Güvenlik açığı değerlendirme taraması sonuçlarının güvenlik duvarları ve sanal ağlar 'ın arkasında erişilebilen bir depolama hesabında depolanması](sql-database-vulnerability-assessment-storage.md)hakkında bilgi edinin.
