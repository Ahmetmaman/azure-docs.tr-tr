---
title: SQL güvenlik açığı değerlendirmesi
titleSuffix: Azure SQL Database & SQL Managed Instance & Azure Synapse Analytics
description: SQL güvenlik açığı değerlendirmesini yapılandırma ve Azure SQL veritabanı, Azure SQL yönetilen örneği ve Azure SYNAPSE Analytics 'teki değerlendirme raporlarını yorumlama hakkında bilgi edinin.
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.custom: sqldbrb=3
ms.devlang: ''
ms.topic: how-to
author: davidtrigano
ms.author: datrigan
ms.reviewer: vanto
ms.date: 02/11/2021
tags: azure-synapse
ms.openlocfilehash: 1719c5a7112ee32f86d0593d274a59638cf81a0e
ms.sourcegitcommit: d4734bc680ea221ea80fdea67859d6d32241aefc
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 02/14/2021
ms.locfileid: "100376652"
---
# <a name="sql-vulnerability-assessment-helps-you-identify-database-vulnerabilities"></a>SQL güvenlik açığı değerlendirmesi, veritabanı güvenlik açıklarını tanımlamanızı sağlar
[!INCLUDE[appliesto-sqldb-sqlmi-asa](../includes/appliesto-sqldb-sqlmi-asa.md)]

SQL güvenlik açığı değerlendirmesi, olası veritabanı güvenlik açıklarını düzeltebileceğiniz, izleyebileceğiniz ve bu sorunları gidermenize yardımcı olabilecek, kolay yapılandırmalı bir hizmettir. Veritabanı güvenliğinizi proaktif olarak geliştirmek için bu hizmeti kullanın.

Güvenlik açığı değerlendirmesi, SQL teklifi [Için Azure Defender](azure-defender-for-sql.md) 'ın, gelişmiş SQL güvenlik özelliklerine yönelik Birleşik bir paket olan parçasıdır. Güvenlik açığı değerlendirmesi, SQL Portal için merkezi Azure Defender aracılığıyla erişilebilir ve yönetilebilir.

> [!NOTE]
> Azure SQL veritabanı, Azure SQL yönetilen örneği ve Azure SYNAPSE Analytics için güvenlik açığı değerlendirmesi desteklenir. Azure SQL veritabanı, Azure SQL yönetilen örneği ve Azure SYNAPSE Analytics 'teki veritabanları, bu makalenin geri kalanında veritabanı olarak ve sunucu, Azure SQL veritabanı ve Azure SYNAPSE için veritabanları barındıran [sunucuya](logical-servers.md) başvurmaktadır.

## <a name="what-is-sql-vulnerability-assessment"></a>SQL güvenlik açığı değerlendirmesi nedir?

SQL güvenlik açığı değerlendirmesi, güvenlik durumlarınızın görünürlüğünü sağlayan bir hizmettir. Güvenlik açığı değerlendirmesi, güvenlik sorunlarını çözmek ve veritabanı güvenlerinizi geliştirmek için uygulanabilir adımları içerir. Değişikliklerin SQL güvenlik duruşunuzu izlemek ve geliştirmek zor olan dinamik bir veritabanı ortamını izlemenize yardımcı olabilir.

Güvenlik açığı değerlendirmesi, Azure SQL veritabanı 'nda yerleşik olarak bulunan bir tarama hizmetidir. Hizmet, güvenlik açıklarına işaret eden kuralların bilgi bankasını kullanır. Yanlış yapılandırma, aşırı izin ve korunmayan hassas veriler gibi en iyi uygulamalardan sapmaları vurgular.

Kurallar Microsoft 'un en iyi uygulamalarını temel alır ve veritabanınıza ve değerli verilere en büyük riskleri sunan güvenlik sorunlarına odaklanmaktadır. Sunucu düzeyi sorunları ve sunucu düzeyi güvenlik sorunlarını (sunucu güvenlik duvarı ayarları ve sunucu düzeyi izinleri gibi) kapsar.

Taramanın sonuçları, her bir sorunu çözmek ve uygulanabilir olduğunda özelleştirilmiş düzeltme betikleri sağlamak için eylem yapılabilir adımları içerir. İçin kabul edilebilir bir taban çizgisi ayarlayarak, ortamınız için bir değerlendirme raporu özelleştirebilirsiniz:

- İzin konfigürasyonları
- Özellik yapılandırması
- Veritabanı ayarları

## <a name="configure-vulnerability-assessment"></a>Güvenlik açığı değerlendirmesini yapılandırma

Güvenlik açığı değerlendirmesini yapılandırmak için aşağıdaki adımları uygulayın:

1. [Azure Portal](https://portal.azure.com), Azure SQL VERITABANı, SQL yönetilen örnek veritabanı veya Azure SYNAPSE içinde belirli bir kaynağı açın.

1. **Güvenlik** başlığı altında **Güvenlik Merkezi**' ni seçin.

1. Sunucu veya yönetilen örnek için SQL için Azure Defender ayarları bölmesini açmak üzere bağlantıyı **Yapılandır** ' ı seçin.

    :::image type="content" source="media/sql-vulnerability-assessment/opening-sql-configuration.png" alt-text="Defender for SQL yapılandırması açılıyor":::

    > [!NOTE]
    > SQL güvenlik açığı değerlendirmesi, **SQL Için Azure Defender** planının taramalar çalıştırabilmesini gerektirir. SQL için Azure Defender 'ı etkinleştirme hakkında daha fazla bilgi için bkz. [SQL Için Azure Defender](azure-defender-for-sql.md).

1. **Sunucu ayarları** SAYFASıNDA, SQL Için Azure Defender ayarlarını tanımlayın:

    :::image type="content" source="media/sql-vulnerability-assessment/sql-vulnerability-scan-settings.png" alt-text="SQL güvenlik açığı değerlendirme taramalarını yapılandırma":::

    1. Sunucudaki tüm veritabanları için tarama sonuçlarınızın veya yönetilen örneğin depolanacağı bir depolama hesabı yapılandırın. Depolama hesapları hakkında daha fazla bilgi için bkz. [Azure depolama hesapları hakkında](../../storage/common/storage-account-create.md).

        > [!TIP]
        > Güvenlik duvarları ve sanal ağlar arkasında güvenlik açığı değerlendirmesi taramaları depolama hakkında daha fazla bilgi için bkz. [Store güvenlik açığı değerlendirmesi tarama sonuçları güvenlik duvarları ve sanal ağlar 'ın arkasında erişilebilen bir depolama hesabında](sql-database-vulnerability-assessment-storage.md).

    1. Güvenlik yapılandırmalarını algılamak üzere haftalık taramaların otomatik olarak çalıştırılması için güvenlik açığı değerlendirmelerini yapılandırmak için, **dönemsel yinelenen taramaları** **Açık** olarak ayarlayın. Sonuçlar, **tarama raporları gönderme** sırasında sağladığınız e-posta adreslerine gönderilir. Ayrıca yöneticilere ve **abonelik sahiplerine e-posta bildirimi göndermenizi** etkinleştirerek Yöneticiler ve abonelik sahiplerine e-posta bildirimi de gönderebilirsiniz.

1. SQL güvenlik açığı değerlendirmesi taramaları, isteğe bağlı olarak da çalıştırılabilir:

    1. Önceki taramaların Tarama sonuçlarına erişmek için kaynağın **Güvenlik Merkezi** sayfasında, **güvenlik açığı değerlendirmesi ' nde ek bulguları görüntüle** ' yi seçin.

        :::image type="content" source="media/sql-vulnerability-assessment/view-additional-findings-link.png" alt-text="Tarama sonuçlarını ve el ile tarama seçeneklerini açma":::

    1. Veritabanınızı güvenlik açıklarına karşı taramak üzere isteğe bağlı bir tarama çalıştırmak için araç çubuğundan **Tara** ' yı seçin:

        :::image type="content" source="media/sql-vulnerability-assessment/on-demand-vulnerability-scan.png" alt-text="SQL kaynağınızın isteğe bağlı güvenlik açığı değerlendirmesi taramasını çalıştırmak için Tara ' yı seçin":::


  > [!NOTE]
  > Tarama hafif ve güvenlidir. Çalışması birkaç saniye sürer ve tamamen salt okunurdur. Veritabanınızda herhangi bir değişiklik yapmaz.

## <a name="remediate-vulnerabilities"></a>Güvenlik açıklarını düzeltin

Bir güvenlik açığı taraması tamamlandığında rapor Azure portal görüntülenir. Rapor şunları gösterir:

- Güvenlik durumlarınızın bir özeti
- Bulunan sorunların sayısı ve
- Risklerin önem derecesine göre Özet
- Daha fazla araştırmalar için bulguları listesi

:::image type="content" source="media/sql-vulnerability-assessment/sample-sql-vulnerabilities-report.png" alt-text="SQL güvenlik açığı değerlendirme tarayıcısı 'ndan sampl tarama raporu":::

Bulunan güvenlik açıklarını düzeltmek için:

1. Sonuçlarınızı gözden geçirin ve rapor bulduklarını, ortamınız için doğru güvenlik sorunları olduğunu öğrenin.

1. Etkisini ve güvenlik denetiminin neden başarısız olduğunu anlamak için, başarısız olan her sonucu seçin.

    > [!TIP]
    > Bulmalar ayrıntıları sayfası, sorunun nasıl çözümleneceğini açıklayan, eyleme dönüştürülebilir düzeltme bilgilerini içerir.

    :::image type="content" source="media/sql-vulnerability-assessment/examining-vulnerability-findings.gif" alt-text="Güvenlik açığı taramasından bulguları İnceleme":::

1. Değerlendirme sonuçlarınızı gözden geçirdikten sonra, belirli sonuçları ortamınızda kabul edilebilir bir *taban çizgisi* olarak işaretleyebilirsiniz. Taban çizgisi temelde sonuçların nasıl raporlanıldığını özelleştirirsiniz. Sonraki taramalarda, taban çizgisiyle eşleşen sonuçlar geçiş olarak değerlendirilir. Temel güvenlik durumlarınızı kurduktan sonra, güvenlik açığı değerlendirmesi yalnızca temelden sapmalarla ilgili raporlar. Bu şekilde, ilgili sorunlara dikkat etmeniz için ilgilenmeniz gerekir.

    :::image type="content" source="media/sql-vulnerability-assessment/baseline-approval.png" alt-text="Daha sonraki taramalar için bir bulma temeli olarak onaylama":::

1. Taban çizgilerini değiştirirseniz, bir isteğe bağlı tarama çalıştırmak ve özelleştirilmiş raporu görüntülemek için **Tara** düğmesini kullanın. Taban çizgisine eklediğiniz tüm bulgular artık, taban çizgisi değişiklikleri nedeniyle başarılı oldukları bir belirtile **geçirilir** .

    :::image type="content" source="media/sql-vulnerability-assessment/passed-per-custom-baseline.png" alt-text="Özel taban çizgisi başına geçtiğini belirten değerlendirmeler başarılı oldu":::

Güvenlik açığı değerlendirme taramalarınız artık veritabanınızın yüksek düzeyde güvenlik tuttuğunu ve kuruluş ilkelerinizin karşılanmasını sağlamak için kullanılabilir. 

## <a name="advanced-capabilities"></a>Gelişmiş yetenekler

### <a name="export-an-assessment-report"></a>Değerlendirme raporunu dışarı aktarın

Tarama sonuçlarınızın indirilebilir bir Excel raporunu oluşturmak için **tarama sonuçlarını dışarı aktar** ' ı seçin. Bu rapor, değerlendirmenin özetini görüntüleyen bir Özet sekmesi içerir. Rapor, başarısız olan tüm denetimleri içerir. Ayrıca, taramanın tüm sonuç kümesini içeren bir **sonuçlar** sekmesi de bulunur. Sonuçlar, çalıştırılan tüm denetimleri ve her biri için sonuç ayrıntılarını içerir.

### <a name="view-scan-history"></a>Tarama geçmişini görüntüleyin

Daha önce bu veritabanında çalıştırılan tüm taramaların geçmişini görüntülemek için güvenlik açığı değerlendirmesi bölmesinde **tarama geçmişi** ' ni seçin. Bu taramanın ayrıntılı sonuçlarını görüntülemek için listeden belirli bir tarama seçin.

## <a name="manage-vulnerability-assessments-programmatically"></a>Güvenlik açığı değerlendirmelerini programlamayla yönetme

### <a name="using-azure-powershell"></a>Azure PowerShell’i kullanma

[!INCLUDE [updated-for-az](../../../includes/updated-for-az.md)]
> [!IMPORTANT]
> PowerShell Azure Resource Manager modülü hala desteklenmektedir, ancak gelecekteki tüm geliştirmeler az. SQL modülüne yöneliktir. Bu cmdlet 'ler için bkz. [Azurerd. SQL](/powershell/module/AzureRM.Sql/). Az Module ve Azurerd modüllerinde komutların bağımsız değişkenleri önemli ölçüde aynıdır.

Güvenlik açığı değerlendirmelerinizi programlı bir şekilde yönetmek için Azure PowerShell cmdlet 'lerini kullanabilirsiniz. Desteklenen Cmdlet 'ler şunlardır:

| Bağlantı olarak cmdlet adı | Description |
| :-------------------- | :---------- |
| [Clear-Azsqldatabasebir, Veitsessmentrulebaseline](/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Güvenlik açığı değerlendirme kuralı temelini temizler.<br/>İlk olarak, bu cmdlet 'i temizlemek için kullanmadan önce temeli ayarlayın. |
| [Clear-Azsqldatabasebir Azıyassessmentsetting](/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting) | Bir veritabanının güvenlik açığı değerlendirmesi ayarlarını temizler. |
| [Clear-Azsqlınstancedatabasebir](/powershell/module/az.sql/Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | Yönetilen bir veritabanının güvenlik açığı değerlendirme kuralı temelini temizler.<br/>İlk olarak, bu cmdlet 'i temizlemek için kullanmadan önce temeli ayarlayın. |
| [Clear-Azsqlınstancedatabase, Azıyassessmentsetting](/powershell/module/az.sql/Clear-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | Yönetilen bir veritabanının güvenlik açığı değerlendirmesi ayarlarını temizler. |
| [Clear-Azsqlınstancebir Azıyassessmentsetting](/powershell/module/az.sql/Clear-AzSqlInstanceVulnerabilityAssessmentSetting) | Yönetilen bir örneğin güvenlik açığı değerlendirmesi ayarlarını temizler. |
| [Convert-Azsqldatabasebir Azıyassessmentscan](/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan) | Bir veritabanının bir Excel dosyasına yönelik güvenlik açığı değerlendirmesi tarama sonuçlarını dönüştürür. |
| [Convert-Azsqlınstancedatabasebir Azıyassessmentscan](/powershell/module/az.sql/Convert-AzSqlInstanceDatabaseVulnerabilityAssessmentScan) | Yönetilen bir veritabanının bir Excel dosyasına yönelik güvenlik açığı değerlendirmesi tarama sonuçlarını dönüştürür. |
| [Get-Azsqldatabasebir](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Belirli bir kural için bir veritabanının güvenlik açığı değerlendirme kuralı temelini alır. |
| [Get-Azsqlınstancedatabasebir](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | Belirli bir kural için yönetilen bir veritabanının güvenlik açığı değerlendirme kuralı temelini alır. |
| [Get-Azsqldatabasebir Azı_vsessmentscanrecord](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord) | Belirli bir veritabanıyla ilişkili tüm güvenlik açığı değerlendirmesi taraması kayıtlarını alır. |
| [Get-Azsqlınstancedatabasebir yardımcı](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentScanRecord) | Belirli bir yönetilen veritabanıyla ilişkili tüm güvenlik açığı değerlendirmesi taraması kayıtlarını alır. |
| [Get-Azsqldatabasebir Azıyassessmentsetting](/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting) | Bir veritabanının güvenlik açığı değerlendirmesi ayarlarını döndürür. |
| [Get-Azsqlınstancedatabase, Azıyassessmentsetting](/powershell/module/az.sql/Get-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | Yönetilen bir veritabanının güvenlik açığı değerlendirmesi ayarlarını döndürür. |
| [Set-Azsqldatabasebir Azıyassessmentrutabaseline](/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Güvenlik açığı değerlendirme kuralı temelini ayarlar. |
| [Set-Azsqlınstancedatabasebir bilgisayar \ Eyas/Baseline](/powershell/module/az.sql/Set-AzSqlInstanceDatabaseVulnerabilityAssessmentRuleBaseline) | Yönetilen bir veritabanı için güvenlik açığı değerlendirme kuralı temelini ayarlar. |
| [Start-Azsqldatabase, Azıyassessmentscan](/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan) | Bir veritabanında güvenlik açığı değerlendirmesi taramasının başlangıcını tetikler. |
| [Start-azsqlınstancedatabase](/powershell/module/az.sql/Start-AzSqlInstanceDatabaseVulnerabilityAssessmentScan) | Yönetilen bir veritabanında güvenlik açığı değerlendirmesi taramasının başlangıcını tetikler. |
| [Update-Azsqldatabasebir, Veitsessmentsetting](/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting) | Bir veritabanının güvenlik açığı değerlendirmesi ayarlarını güncelleştirir. |
| [Update-Azsqlınstancedatabasebir, Veitsessmentsetting](/powershell/module/az.sql/Update-AzSqlInstanceDatabaseVulnerabilityAssessmentSetting) | Yönetilen bir veritabanının güvenlik açığı değerlendirmesi ayarlarını güncelleştirir. |
| [Update-Azsqlınstancebir Azıyassessmentsetting](/powershell/module/az.sql/Update-AzSqlInstanceVulnerabilityAssessmentSetting) | Yönetilen bir örneğin güvenlik açığı değerlendirmesi ayarlarını güncelleştirir. |
| &nbsp; | &nbsp; |

Bir betik örneği için bkz. [Azure SQL güvenlik açığı değerlendirmesi PowerShell desteği](/archive/blogs/sqlsecurity/azure-sql-vulnerability-assessment-now-with-powershell-support).

### <a name="using-resource-manager-templates"></a>Resource Manager şablonlarını kullanma

Güvenlik açığı değerlendirmesi temellerini Azure Resource Manager şablonları kullanarak yapılandırmak için, türü kullanın `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` .

Taban çizgileri eklemeden önce etkin olduğunuzdan emin olun `vulnerabilityAssessments` .

İşte `master` `user` bir kaynak yöneticisi şablonundaki kaynak olarak VERITABANı ve VA1143 'e VA2065 temel kuralı tanımlamak için bir örnek:

```json
   "resources": [
      {
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "FirewallRuleName3",
                     "StartIpAddress",
                     "EndIpAddress"
                  ]
               },
               {
                  "result": [
                     "FirewallRuleName4",
                     "62.92.15.68",
                     "62.92.15.68"
                  ]
               }
            ]
         },
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
         "dependsOn": [
            "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
         ],
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "dbo"
                  ]
               }
            ]
         }
      }
   ]
```

`master`Veritabanı ve `user` veritabanı için, kaynak adları farklı şekilde tanımlanır:

- Ana veritabanı-"ad": "[Concat (Parametreler (' server_name '), '/', parametreler (' database_name '), '/default/VA2065/<b>Master</b>')]",
- Kullanıcı veritabanı-"ad": "[Concat (Parametreler (' server_name '), '/', parametreler (' database_name '), '/default/VA2065/<b>varsayılan</b>')]",

Boolean türlerini doğru/yanlış olarak işlemek için, taban çizgisi sonucunu "1"/"0" gibi ikili girişle ayarlayın.

```json
   {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
      "apiVersion": "2018-06-01-preview",
      "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",

      "dependsOn": [
         "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
      ],

      "properties": {
         "baselineResults": [
            {
               "result": [
                  "1"
               ]
            }
         ]
      }

   }
```

## <a name="next-steps"></a>Sonraki adımlar  

- [SQL Için Azure Defender](azure-defender-for-sql.md)hakkında daha fazla bilgi edinin.
- [Veri bulma ve sınıflandırma](data-discovery-and-classification-overview.md)hakkında daha fazla bilgi edinin.
- [Güvenlik açığı değerlendirme taraması sonuçlarını güvenlik duvarları ve sanal ağlar 'ın arkasında erişilebilen bir depolama hesabında depolamak](sql-database-vulnerability-assessment-storage.md)hakkında daha fazla bilgi edinin.